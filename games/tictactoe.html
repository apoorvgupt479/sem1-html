<canvas id="ticTacToeCanvas" width="300" height="300"></canvas>
<script>
const canvas = document.getElementById('ticTacToeCanvas');
const ctx = canvas.getContext('2d');
const cellSize = 100;
let board = Array(9).fill(null);
let currentPlayer = 'X';
let winner = null;

function drawBoard() {
  for (let i = 1; i < 3; i++) {
    ctx.beginPath();
    ctx.moveTo(i * cellSize, 0);
    ctx.lineTo(i * cellSize, 300);
    ctx.stroke();
    ctx.beginPath();
    ctx.moveTo(0, i * cellSize);
    ctx.lineTo(300, i * cellSize);
    ctx.stroke();
  }
}

function drawMarks() {
  for (let i = 0; i < board.length; i++) {
    const x = (i % 3) * cellSize + cellSize / 2;
    const y = Math.floor(i / 3) * cellSize + cellSize / 2;
    if (board[i] === 'X') {
      ctx.beginPath();
      ctx.moveTo(x - 25, y - 25);
      ctx.lineTo(x + 25, y + 25);
      ctx.moveTo(x + 25, y - 25);
      ctx.lineTo(x - 25, y + 25);
      ctx.stroke();
    } else if (board[i] === 'O') {
      ctx.beginPath();
      ctx.arc(x, y, 25, 0, Math.PI * 2);
      ctx.stroke();
    }
  }
}

function checkWinner() {
  const winningCombos = [
    [0, 1, 2], [3, 4, 5], [6, 7, 8],  // rows
    [0, 3, 6], [1, 4, 7], [2, 5, 8],  // columns
    [0, 4, 8], [2, 4, 6]  // diagonals
  ];

  for (const combo of winningCombos) {
    const [a, b, c] = combo;
    if (board[a] && board[a] === board[b] && board[a] === board[c]) {
      winner = board[a];
      return;
    }
  }

  if (!board.includes(null)) {
    winner = 'Draw';
  }
}

function handleClick(e) {
  if (winner) return;

  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;

  const cellX = Math.floor(x / cellSize);
  const cellY = Math.floor(y / cellSize);
  const index = cellY * 3 + cellX;

  if (!board[index]) {
    board[index] = currentPlayer;
    currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
    checkWinner();
    draw();
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawBoard();
  drawMarks();
  if (winner) {
    ctx.font = '40px Arial';
    ctx.fillText(winner === 'Draw' ? 'Draw!' : `${winner} wins!`, 50, 150);
  }
}

canvas.addEventListener('click', handleClick);
draw();
</script>
